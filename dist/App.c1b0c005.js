parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sFhJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t extends PIXI.Container{constructor(t,e){super(),this.bgData=e,this.stage=t.stage,this.createBG()}createBG(){this.stage.gamePhase=this.bgData.gamePhase;let t=PIXI.Texture.fromImage(this.bgData.bgTexture),e=new PIXI.Sprite(t);e.position.x=this.bgData.bg_x,e.position.y=this.bgData.bg_y,e.width=this.bgData.bg_width,e.height=this.bgData.bg_height,this.visible=!0,this.addChild(e)}}exports.default=t;
},{}],"XIfb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l={rendererResolution:window.devicePixelRatio,hasLogin:!1,mainFont:"Girassol",addTeam:!1,fadeTimeBetweenPhases:.5,gridHasMask:!0,isGridInDebug:!1,debugGrid:[["ball_purple","ball_red","ball_purple","ball_green","ball_blue","ball_red"],["ball_red","ball_purple","ball_purple","ball_blue","ball_green","ball_blue"],["ball_green","ball_purple","ball_purple","ball_yellow","ball_green","ball_green"],["ball_orange","ball_blue","ball_purple","ball_purple","ball_red","ball_green"],["ball_red","ball_red","ball_green","ball_red","ball_green","ball_red"],["ball_green","ball_red","ball_green","ball_green","ball_red","ball_orange"],["ball_red","ball_orange","ball_red","ball_red","ball_purple","ball_red"],["ball_blue","ball_red","ball_red","ball_yellow","ball_blue","ball_red"]]};exports.default=l;
},{}],"bieY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../Config.js"));function e(t){return t&&t.__esModule?t:{default:t}}class s extends PIXI.Container{constructor(e){super(),this.config=t.default,this.font_size=e.font_size,this.index=e.index,this.stats=e.stats,this.cardTexture=e.cardTexture,this.card_height=e.card_height,this.card_width=e.card_width,this.card_x=e.card_x,this.card_y=e.card_y,this.shoeTexture=e.shoeTexture,this.shoe_height=e.shoe_height,this.shoe_width=e.shoe_width,this.shoe_x=e.shoe_x,this.shoe_y=e.shoe_y,this.attack_text=e.attack_text,this.defense_text=e.defense_text,this.gloveTexture=e.gloveTexture,this.glove_height=e.glove_height,this.glove_width=e.glove_width,this.glove_x=e.glove_x,this.glove_y=e.glove_y,this.border_height=e.border_height,this.border_width=e.border_width,this.border_x=e.border_x,this.border_y=e.border_y,this.colors={FF1D00:"ball_red","3052FF":"ball_blue","2F7F07":"ball_green",E2D841:"ball_yellow",FF9702:"ball_orange",B200FF:"ball_purple"},this.createCard()}createCard(){this.index=this.index,this.stats=this.stats;let t=PIXI.Texture.fromImage(this.cardTexture);this.cardImg=new PIXI.Sprite(t),this.cardImg.x=this.card_x,this.cardImg.y=this.card_y,this.cardImg.width=this.card_width,this.cardImg.height=this.card_height;let e=PIXI.Texture.fromImage(this.shoeTexture);this.shoe=new PIXI.Sprite(e),this.shoe.x=this.shoe_x,this.shoe.y=this.shoe_y,this.shoe.width=this.shoe_width,this.shoe.height=this.shoe_height,this.shoe.tint="0x"+this.stats.attack_color;let s=PIXI.Texture.fromImage(this.gloveTexture);this.glove=new PIXI.Sprite(s),this.glove.x=this.glove_x,this.glove.y=this.glove_y,this.glove.width=this.glove_width,this.glove.height=this.glove_height,this.glove.tint="0x"+this.stats.defense_color,this.border=new PIXI.Graphics,this.border.lineStyle(1,13682233,1),this.border.drawRect(this.border_x,this.border_y,this.border_width,this.border_height),this.addChild(this.cardImg),this.attackValuesText=new PIXI.Text(this.stats.attack_current+"/"+this.stats.attack_full,{fontFamily:this.config.mainFont,fontSize:this.font_size,fill:"#"+this.stats.attack_color,align:"center",stroke:"#000000",strokeThickness:4}),this.attackValuesText.position.set(this.attack_text.x,this.attack_text.y),this.attackValuesText.anchor.x=1,this.defenseValuesText=new PIXI.Text(this.stats.defense_current+"/"+this.stats.defense_full,{fontFamily:this.config.mainFont,fontSize:this.font_size,fill:"#"+this.stats.defense_color,align:"center",stroke:"#000000",strokeThickness:4}),this.defenseValuesText.position.set(this.defense_text.x,this.defense_text.y),this.defenseValuesText.anchor.x=1,this.attackValuesText.name="attackValuesText",this.defenseValuesText.name="defenseValuesText",this.addChild(this.attackValuesText),this.addChild(this.defenseValuesText),this.addChild(this.shoe),this.addChild(this.glove),this.addChild(this.border)}increasePoints(t){let e=this.colors[this.stats.defense_color],s=this.colors[this.stats.attack_color],i=t.filter(t=>t.type===e).length,h=t.filter(t=>t.type===s).length,a=this.cardImg.scale.x,r=this.cardImg.scale.y;if(i>0){this.stats.defense_current+=i,this.defenseValuesText.text=`${this.stats.defense_current}/${this.stats.defense_full}`,this.cardImg.tint="0x"+this.stats.defense_color,TweenMax.to(this.cardImg,.15,{delay:.7,onComplete:()=>{this.cardImg.tint=16777215}}),TweenMax.to(this.cardImg.scale,.15,{x:1.05*a,y:1.05*r,yoyo:!0,repeat:1});let t=new PIXI.Text("+"+i,{fontFamily:this.config.mainFont,fontSize:this.cardImg.height/2,fill:"#"+this.stats.defense_color,align:"center",stroke:"#000000",strokeThickness:3});t.position.set(this.cardImg.x+this.cardImg.width/2,this.cardImg.y+this.cardImg.height/2),t.anchor.x=.5,t.anchor.y=.5,this.parent.parent.addChild(t),TweenMax.to(t,1.5,{y:this.parent.parent.height/2,ease:Linear.easeNone,onComplete:()=>{t.alpha=0,this.parent.parent.removeChild(t)}})}if(h>0){this.stats.attack_current+=h,this.attackValuesText.text=`${this.stats.attack_current}/${this.stats.attack_full}`,this.cardImg.tint="0x"+this.stats.attack_color,TweenMax.to(this.cardImg,.15,{delay:.7,onComplete:()=>{this.cardImg.tint=16777215}}),TweenMax.to(this.cardImg.scale,.15,{x:1.05*a,y:1.05*r,yoyo:!0,repeat:1});let t=new PIXI.Text("+"+h,{fontFamily:this.config.mainFont,fontSize:this.cardImg.height/2,fill:"#"+this.stats.attack_color,align:"center",stroke:"#000000",strokeThickness:3});t.position.set(this.cardImg.x+this.cardImg.width/2,this.cardImg.y+this.cardImg.height/2),t.anchor.x=.5,t.anchor.y=.5,this.parent.parent.addChild(t),TweenMax.to(t,1.5,{y:this.parent.parent.height/2,ease:Linear.easeNone,onComplete:()=>{t.alpha=0,this.parent.parent.removeChild(t)}})}}}exports.default=s;
},{"../Config.js":"XIfb"}],"DYft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Config.js"));function t(e){return e&&e.__esModule?e:{default:e}}function l(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class a{constructor(t,a,n){l(this,"clubData",(t,l)=>{e.default.addTeam?$.ajax({url:"addClub",type:"POST",contentType:"application/json",data:JSON.stringify({name:t,players:this[t]}),success:e=>{console.log(e)}}):$.ajax({url:"getClubsPlayers",type:"POST",contentType:"application/json",data:JSON.stringify({name:t}),success:e=>{l?(this.opponent=e.clubData.players,this.onPlayerCardsData()):(this.player=e.clubData.players,this.clubData(this.clubName2,!0))},error:()=>{alert("err")}})}),this.onPlayerCardsData=n,this.clubName2=a,this.testClub1=[{defense_current:0,defense_color:"FF1D00",defense_full:20,attack_current:0,attack_color:"B200FF",attack_full:20,special:null,position:"GK",player_img_id:"011"},{defense_current:0,defense_color:"B200FF",defense_full:20,attack_current:0,attack_color:"2F7F07",attack_full:20,special:null,position:"DF1",player_img_id:"001"},{defense_current:0,defense_color:"FF1D00",defense_full:20,attack_current:0,attack_color:"3052FF",attack_full:20,special:null,position:"DF2",player_img_id:"007"},{defense_current:0,defense_color:"FF9702",defense_full:20,attack_current:0,attack_color:"FF9702",attack_full:20,special:null,position:"MD1",player_img_id:"008"},{defense_current:0,defense_color:"2F7F07",defense_full:20,attack_current:0,attack_color:"E2D841",attack_full:20,special:null,position:"MD2",player_img_id:"018"},{defense_current:0,defense_color:"E2D841",defense_full:20,attack_current:0,attack_color:"FF9702",attack_full:20,special:null,position:"F",player_img_id:"010"}],this.testClub2=[{defense_current:0,defense_color:"FF1D00",defense_full:20,attack_current:0,attack_color:"B200FF",attack_full:20,special:null,position:"GK",opponent_img_id:"009"},{defense_current:0,defense_color:"B200FF",defense_full:20,attack_current:0,attack_color:"2F7F07",attack_full:20,special:null,position:"DF1",opponent_img_id:"003"},{defense_current:0,defense_color:"B200FF",defense_full:20,attack_current:0,attack_color:"FF1D00",attack_full:20,special:null,position:"DF2",opponent_img_id:"004"},{defense_current:0,defense_color:"E2D841",defense_full:20,attack_current:0,attack_color:"FF9702",attack_full:20,special:null,position:"MD1",opponent_img_id:"005"},{defense_current:0,defense_color:"3052FF",defense_full:20,attack_current:0,attack_color:"E2D841",attack_full:20,special:null,position:"MD2",opponent_img_id:"006"},{defense_current:0,defense_color:"E2D841",defense_full:20,attack_current:0,attack_color:"B200FF",attack_full:20,special:null,position:"F",opponent_img_id:"007"}],this.clubData(t)}}exports.default=a;
},{"./Config.js":"XIfb"}],"j9sZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Card.js")),e=i(require("../LineUps.js"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h extends PIXI.Container{constructor(t,i,h,a){super(),s(this,"onPlayerCardsData",()=>{this.lineUps.player&&this.lineUps.opponent&&("player"===this.targetDeck?this.createPlayerDeck():this.createOpponentDeck(),this.dataRecieved())}),this.targetDeck=a,this.stageWidth=i,this.stageHeight=h,this.dataRecieved=t,this.lineUps=new e.default("testClub1","testClub2",this.onPlayerCardsData),this.interactive=!1}createPlayerDeck(){for(let e=0;e<6;e++){let i=new t.default({index:e,stats:this.lineUps.player[e],font_size:this.stageHeight/45+"px",cardTexture:`images/players/player_id_${this.lineUps.player[e].player_img_id}.png`,card_x:this.stageWidth/6*e,card_y:.88*this.stageHeight,card_width:this.stageWidth/6,card_height:.12*this.stageHeight,shoeTexture:"images/shoe.png",shoe_x:this.stageWidth/5.95*e,shoe_y:.882*this.stageHeight,shoe_width:this.stageWidth/21,shoe_height:this.stageWidth/21,attack_text:{x:this.stageWidth/6*e+this.stageWidth/6,y:.88*this.stageHeight},gloveTexture:"images/glove2.png",glove_x:this.stageWidth/5.95*e,glove_y:.968*this.stageHeight,glove_width:this.stageWidth/21,glove_height:this.stageWidth/21,defense_text:{x:this.stageWidth/6*e+this.stageWidth/6,y:.97*this.stageHeight},border_x:this.stageWidth/6*e,border_y:.879*this.stageHeight,border_width:this.stageWidth/6,border_height:.12*this.stageHeight});this.addChild(i)}}createOpponentDeck(){for(let e=0;e<6;e++){let i=new t.default({index:e,stats:this.lineUps.opponent[e],font_size:this.stageHeight/45+"px",cardTexture:`images/players/player_id_${this.lineUps.opponent[e].opponent_img_id}.png`,card_x:this.stageWidth/6*e,card_y:0,card_width:this.stageWidth/6,card_height:.12*this.stageHeight,shoeTexture:"images/shoe.png",shoe_x:this.stageWidth/5.95*e,shoe_y:.005*this.stageHeight,shoe_width:this.stageWidth/21,shoe_height:this.stageWidth/21,attack_text:{x:this.stageWidth/6*e+this.stageWidth/6,y:.002*this.stageHeight},gloveTexture:"images/glove2.png",glove_x:this.stageWidth/5.95*e,glove_y:.09*this.stageHeight,glove_width:this.stageWidth/21,glove_height:this.stageWidth/21,defense_text:{x:this.stageWidth/6*e+this.stageWidth/6,y:.092*this.stageHeight},border_x:this.stageWidth/6*e,border_y:0*this.stageHeight,border_width:this.stageWidth/6,border_height:.122*this.stageHeight});this.addChild(i)}}}exports.default=h;
},{"./Card.js":"bieY","../LineUps.js":"DYft"}],"MVi9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../Config.js")),i=e(require("./Grid.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}class o extends PIXI.Container{constructor(i,e,o,s,h){super(),r(this,"onDragStart",t=>{t.gridPosition_x=this.col,t.gridPosition_y=this.row,this.grid.onDragStart(t)}),r(this,"onDragMove",t=>{this.grid.onDragMove(t)}),r(this,"onDragEnd",t=>{this.grid.onDragEnd(t)}),this.config=t.default,this.app=h,this.grid=s,this.row=i,this.col=e,this.rowContainer=o,this.moveCoordinates={startX:0,startY:0,lastX:0,lastY:0},this.create()}create(){let t=!0;if(this.config.isGridInDebug)this.img=this.config.debugGrid[this.row][this.col];else for(;t;)this.img=this.generateRandomColorBlock(),t=this.createNonMatchingGrid(this.row,this.col,this.img);let i=PIXI.Texture.fromImage(`images/${this.img}.png`);this.blockImg=new PIXI.Sprite(i),this.interactive=!0,this.buttonMode=!0,this.blockImg.anchor.x=.5,this.blockImg.anchor.y=.5,this.blockImg.gridPosition_x=this.row,this.blockImg.gridPosition_y=this.col,this.type=this.img;let e=.65*this.app.height,r=.75*e,o=r/6,s=e/8,h=s/2+(this.app.height-e)/2,a=s/2+(this.app.width-r)/2;this.blockImg.x=a+o*this.col,this.blockImg.y=h+s*this.row,this.blockImg.width=.9*s,this.blockImg.height=.9*s,this.grid.globalBlocksPositions[this.row].push({x:this.blockImg.x,y:this.blockImg.y}),this.blockImg.alpha=0,this.addChild(this.blockImg),setTimeout(()=>{this.blockImg.alpha=1},90*this.row+15*this.col+1e3*this.config.fadeTimeBetweenPhases+1750),this.on("pointerdown",this.onDragStart),this.on("pointerup",this.onDragEnd),this.on("pointermove",this.onDragMove)}generateRandomColorBlock(){let t,i=Math.floor(100*Math.random())+1;switch(!0){case i<=14:t="ball_blue";break;case i>14&&i<=28:t="ball_green";break;case i>28&&i<=42:t="ball_orange";break;case i>42&&i<=56:t="ball_purple";break;case i>56&&i<=70:t="ball_red";break;case i>70&&i<=84:t="ball_yellow";break;case i>84&&i<=94:t="yellow_card";break;case i>94&&i<=98:t="red_card";break;case i>98&&i<=100:t="red_cross";break;default:t="error"}return t}createNonMatchingGrid(t,i,e){return(()=>{if(t<2)return!1;let r=1;for(let o=1;o<3;o++){if(e!==this.grid.children[t-o].children[i].type)return!1;if(3==++r)return!0}})()||(()=>{if(i<2)return!1;let t=1;for(let r=1;r<3;r++){if(e!==this.rowContainer.children[i-r].type)return!1;if(3==++t)return!0}})()}}exports.default=o;
},{"../Config.js":"XIfb","./Grid.js":"LlEO"}],"mVtl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../Config.js")),t=s(require("./Block.js"));function s(e){return e&&e.__esModule?e:{default:e}}class r extends PIXI.Container{constructor(t,s,r){super(),this.config=e.default,this.app=t,this.rowId=s,this.grid=r,this.create()}create(){for(let e=0;e<6;e++){let s=new t.default(this.rowId,e,this,this.grid,this.app);this.addChild(s),this.grid.blocks[this.rowId].push(s)}}}exports.default=r;
},{"../Config.js":"XIfb","./Block.js":"MVi9"}],"LlEO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../Config.js")),t=o(require("./Block.js")),i=o(require("./Row.js"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s extends PIXI.Container{constructor(t){super(),l(this,"onDragStart",e=>{this.moveCoordinates.startX=e.data.global.x,this.moveCoordinates.startY=e.data.global.y,this.moveCoordinates.lastX=e.data.global.x,this.moveCoordinates.lastY=e.data.global.y,this.gridPosition_x=e.gridPosition_x,this.gridPosition_y=e.gridPosition_y,this.data=e.data,this.dragging=!0}),l(this,"onDragMove",e=>{if(this.dragging&&!this.animationInProgress){this.moveCoordinates.lastX=e.data.global.x,this.moveCoordinates.lastY=e.data.global.y;let t=this.blocks[0][0].height/3,i={left:this.moveCoordinates.startX-this.moveCoordinates.lastX,right:this.moveCoordinates.lastX-this.moveCoordinates.startX,up:this.moveCoordinates.startY-this.moveCoordinates.lastY,down:this.moveCoordinates.lastY-this.moveCoordinates.startY},o=Object.values(i),l=Math.max(...o),s=Object.keys(i).find(e=>i[e]===l);if(this.moveCoordinates.startY===this.moveCoordinates.lastY&&this.moveCoordinates.startX===this.moveCoordinates.lastX||"down"===s&&7===this.gridPosition_y||"up"===s&&0===this.gridPosition_y||"right"===s&&5===this.gridPosition_x||"left"===s&&0===this.gridPosition_x||l<t)return;this.animationInProgress=!0,this.swapBlocks(this.gridPosition_x,this.gridPosition_y,s)}}),this.app=t,this.level=t.level,this.config=e.default,this.moveCoordinates={startX:0,startY:0,lastX:0,lastY:0},this.interactive=!0,this.gridArrays=[],this.globalBlocksPositions=[[],[],[],[],[],[],[],[]],this.blocks=[[],[],[],[],[],[],[],[]],this.createGrid()}createGrid(){for(let e=0;e<8;e++){let t=new i.default(this.app,e,this);this.addChild(t),this.gridArrays.push(t.children.map(e=>e.type))}}swapBlocks(e,t,i){this.dragging=!1,this.swapDirection=i,this.blockBeingSwappedWith=null;let o,l=this.children[t].children[e],s=l.img,h=null;switch(this.selectedBlock={row:t,col:e,type:l.type,oldX:l.blockImg.x,oldY:l.blockImg.y},i){case"down":o=this.children[t+1].children[e],this.blockBeingSwappedWith={row:t+1,col:e,type:o.type,oldX:o.blockImg.x,oldY:o.blockImg.y};break;case"up":o=this.children[t-1].children[e],this.blockBeingSwappedWith={row:t-1,col:e,type:o.type,oldX:o.blockImg.x,oldY:o.blockImg.y};break;case"left":o=this.children[t].children[e-1],this.blockBeingSwappedWith={row:t,col:e-1,type:o.type,oldX:o.blockImg.x,oldY:o.blockImg.y};break;case"right":o=this.children[t].children[e+1],this.blockBeingSwappedWith={row:t,col:e+1,type:o.type,oldX:o.blockImg.x,oldY:o.blockImg.y}}h=o.img,TweenMax.to(l.children[0],.2,{y:o.children[0].y,x:o.children[0].x,ease:Linear.easeNone,onComplete:()=>{}}),TweenMax.to(o.children[0],.2,{y:l.children[0].y,x:l.children[0].x,ease:Linear.easeNone,onComplete:()=>{let e=l.type,t=l.gridPosition;l.type=o.type,l.gridPosition=o.gridPosition,o.type=e,o.gridPosition=t;let i=this.checkGridForMatches();if(0!==i.length){for(let s=0;s<i.length;s++)i[s].row===o.row&&i[s].col===o.col?(i[s].beingSwapped=!0,this.matchingSwappedItem=1):i[s].row===l.row&&i[s].col===l.col?(i[s].beingSwapped=!0,this.matchingSwappedItem=2):i[s].dir=this.swapDirection;this.gridArrays[this.selectedBlock.row][this.selectedBlock.col]=h,this.gridArrays[this.blockBeingSwappedWith.row][this.blockBeingSwappedWith.col]=s;let e=this.globalBlocksPositions[this.selectedBlock.row][this.selectedBlock.col].x,t=this.globalBlocksPositions[this.selectedBlock.row][this.selectedBlock.col].y,r=this.children[this.selectedBlock.row].children[this.selectedBlock.col].type;o.children[0].x=this.globalBlocksPositions[this.blockBeingSwappedWith.row][this.blockBeingSwappedWith.col].x,o.children[0].y=this.globalBlocksPositions[this.blockBeingSwappedWith.row][this.blockBeingSwappedWith.col].y,o.type=this.children[this.blockBeingSwappedWith.row].children[this.blockBeingSwappedWith.col].type,o.children[0].texture=PIXI.Texture.fromImage(`images/${o.type}.png`),l.children[0].x=e,l.children[0].y=t,l.type=r,l.children[0].texture=PIXI.Texture.fromImage(`images/${l.type}.png`),this.gatherMatchingBlocks(i),TweenMax.delayedCall(0,()=>{this.increaseCardsPointsAfterMatch(i)})}else TweenMax.to(l.children[0],.2,{y:this.selectedBlock.oldY,x:this.selectedBlock.oldX,ease:Linear.easeNone,onComplete:()=>{this.animationInProgress=!1}}),TweenMax.to(o.children[0],.2,{y:this.blockBeingSwappedWith.oldY,x:this.blockBeingSwappedWith.oldX,ease:Linear.easeNone,onComplete:()=>{this.animationInProgress=!1}})}})}checkGridForMatches(){let e=[];for(let t=0;t<8;t++)for(let i=0;i<6;i++){let o={row:t,col:i,type:this.children[t].children[i].type},l=this.children[t].children[i].type,s=this.children[t].children[i+1]?this.children[t].children[i+1].type:null,h=this.children[t].children[i+2]?this.children[t].children[i+2].type:null,r=this.children[t].children[i-1]?this.children[t].children[i-1].type:null,n=this.children[t].children[i-2]?this.children[t].children[i-2].type:null;if(l===s&&l===h||l===r&&l===n||l===s&&l===r){e.push(o);continue}let a=null;this.children[t+1]&&(a=this.children[t+1].children[i]?this.children[t+1].children[i].type:null);let c=null;this.children[t+2]&&(c=this.children[t+2].children[i]?this.children[t+2].children[i].type:null);let d=null;this.children[t-1]&&(d=this.children[t-1].children[i]?this.children[t-1].children[i].type:null);let g=null;this.children[t-2]&&(g=this.children[t-2].children[i]?this.children[t-2].children[i].type:null),(l===d&&l===g||l===a&&l===c||l===a&&l===d)&&e.push(o)}return e}gatherMatchingBlocks(e){this.nullifyMatchesInGridArray(e);let t=e.filter(e=>e.beingSwapped);if(0===t.length){const i=[...new Set(e.map(e=>e.type))];for(let o of i){let i=e.filter(e=>e.type===o),l=Math.floor(i.length/2);console.log(l),e[l].beingSwapped=!0,t.push(e[l])}}for(let i=0;i<t.length;i++){let o=e.filter(e=>e.type===t[i].type);for(let e=0;e<o.length;e++){let t=o.filter(e=>e.beingSwapped)[0],i=this.children[o[e].row].children[o[e].col];if(o[e].beingSwapped)TweenMax.to(i.blockImg,.2,{alpha:0,delay:.2,onComplete:()=>{}});else{let e=this.globalBlocksPositions[t.row][t.col].x,o=this.globalBlocksPositions[t.row][t.col].y;TweenMax.to(i.blockImg,.2,{x:e,y:o,alpha:0,ease:Linear.easeNone,onComplete:()=>{}})}}}}nullifyMatchesInGridArray(e){for(const t of e)this.gridArrays[t.row][t.col]=null}increaseCardsPointsAfterMatch(e){if(this.parent.playerTurn){for(let t=0;t<this.parent.playerCards.children.length;t++){let i=this.parent.playerCards.children[t];setTimeout(()=>{i.increasePoints(e)},75*t)}TweenMax.delayedCall(.75,()=>{this.tweenDownMatchingBlocks(e)})}}checkAutomaticMatch(){TweenMax.delayedCall(.5,()=>{let e=this.checkGridForMatches();console.log(e),e.length>0?(this.gatherMatchingBlocks(e),TweenMax.delayedCall(0,()=>{this.increaseCardsPointsAfterMatch(e)})):this.animationInProgress=!1})}tweenDownMatchingBlocks(e){this.holesInColumns=[{holes:0,onRow:[]},{holes:0,onRow:[]},{holes:0,onRow:[]},{holes:0,onRow:[]},{holes:0,onRow:[]},{holes:0,onRow:[]}],this.gridArrays.forEach((e,t)=>{e.forEach((e,i)=>{null===this.gridArrays[t][i]&&(this.holesInColumns[i].holes++,this.holesInColumns[i].onRow.push(t))})}),this.blocks.forEach((e,t)=>{e.forEach((e,i)=>{this.blocks[t][i].shouldFall=0,null!==this.gridArrays[t][i]&&(this.blocks[t][i].shouldFall=this.holesInColumns[i].onRow.filter(t=>t>=e.row).length);let o=this.blocks[t][i].shouldFall;if(o>0){let e=this.globalBlocksPositions[t+o][i].y,l=this.blocks[t][i].blockImg;TweenMax.to(l,.3*o,{y:e,onComplete:()=>{this.gridArrays[t+o][i]=l.parent.type}})}})}),this.createNewBlocks()}createNewBlocks(){let e=this.globalBlocksPositions[1][0].y-this.globalBlocksPositions[0][0].y,t=this.globalBlocksPositions[0][0].y;this.holesInColumns.forEach((i,o)=>{if(i.holes>0)for(let l=0;l<i.holes;l++){let s=i.onRow[l],h=this.blocks[s][o].blockImg,r=h.parent.generateRandomColorBlock();h.texture=PIXI.Texture.fromImage(`images/${r}.png`);let n=this.globalBlocksPositions[i.holes-l-1][o].y;h.y=t-e*(l+1),h.x=this.globalBlocksPositions[s][o].x,h.alpha=1,TweenMax.to(h,.31*i.holes,{y:n,onComplete:()=>{this.gridArrays[i.holes-l-1][o]=h.parent.img=r}})}}),TweenMax.delayedCall(.33*Math.max(...this.holesInColumns.map(e=>e.holes)),()=>{this.setAccurateBlocksPositions()})}setAccurateBlocksPositions(){this.gridArrays.forEach((e,t)=>{e.forEach((e,i)=>{let o=this.gridArrays[t][i],l=o,s=PIXI.Texture.fromImage(`images/${o}.png`),h=this.globalBlocksPositions[t][i].x,r=this.globalBlocksPositions[t][i].y;this.blocks[t][i].img=o,this.blocks[t][i].type=l,this.blocks[t][i].blockImg.texture=s,this.blocks[t][i].blockImg.x=h,this.blocks[t][i].blockImg.y=r})}),console.table(this.gridArrays),console.log(this.blocks),this.checkAutomaticMatch()}onDragEnd(e){this.dragging=!1}}exports.default=s;
},{"../Config.js":"XIfb","./Block.js":"MVi9","./Row.js":"mVtl"}],"I7z1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./Background.js")),t=h(require("./Config.js")),i=h(require("./gameLevel/LevelCardsSet.js")),s=h(require("./gameLevel/Grid.js"));function h(e){return e&&e.__esModule?e:{default:e}}class a extends PIXI.Container{constructor(h){super(),alert("level"),this.app=h,this.config=t.default,this.stage=h.stage,this.stage.alpha=0,this.proton=h.proton,this.width=h.width,this.height=h.height,this.grid=null,this.playerCardsContainer=null,this.opponentCardsContainer=null,this.animationInProgress=!1,this.playerTurn=!0,this.bg=new e.default(this.app,{gamePhase:"level",bgTexture:"images/pitch.png",bg_x:.005*-this.app.width,bg_y:.005*-this.app.height,bg_width:1.005*this.app.width,bg_height:1.005*this.app.height}),this.addChild(this.bg),this.grid=new s.default(this.app),this.addChild(this.grid),this.dataRecieved=(()=>{this.grid.checkGridForMatches(),TweenMax.delayedCall(1,()=>{TweenMax.to(this.stage,this.config.fadeTimeBetweenPhases,{alpha:1})})}),this.playerCards=new i.default(this.dataRecieved,this.app.width,this.app.height,"player"),this.addChild(this.playerCards),this.opponentCards=new i.default(()=>{},this.app.width,this.app.height,"opponent"),this.addChild(this.opponentCards)}}exports.default=a;
},{"./Background.js":"sFhJ","./Config.js":"XIfb","./gameLevel/LevelCardsSet.js":"j9sZ","./gameLevel/Grid.js":"LlEO"}],"CK79":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(){PIXI.settings.RESOLUTION=window.devicePixelRatio,PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,this.canvas=document.getElementById("stage"),this.stage=new PIXI.Container;let t=()=>{console.log(window.devicePixelRatio),this.width=1080,this.height=1920,this.height=window.innerHeight,this.width=1080*this.height/1920,this.width>window.innerWidth&&(this.width=window.innerWidth,this.height=1.77*this.width),this.canvas.width=this.width,this.canvas.height=this.height,this.stage.height=this.height,this.stage.width=this.width,console.log(this.width),console.log(this.height),this.renderer.resize(this.canvas.width,this.canvas.height)};this.renderer=PIXI.autoDetectRenderer(this.canvas.width,this.canvas.height,{transparent:!0,resolution:window.devicePixelRatio||1,view:this.canvas,autoResize:!0,autoDensity:!0,antialias:!0}),PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.LINEAR,t(),this.animationLoop=(()=>{this.renderer.render(this.stage),requestAnimationFrame(this.animationLoop)}),this.setup=(()=>{this.animationLoop()}),this.loader=PIXI.loader,this.loader.add("spriteSheet","images/pitch.png"),this.loader.load(this.setup),window.onresize=t}}exports.default=t;
},{}],"kp3D":[function(require,module,exports) {
"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(t){e(this,"loginPressed",()=>{this.action="login",this.enableInputs(),TweenMax.to(this.register,.5,{opacity:.5}),TweenMax.to(this.login,.5,{opacity:1}),TweenMax.to(this.username,.5,{opacity:1}),TweenMax.to(this.password,.5,{opacity:1}),this.username.style.pointerEvents="auto",this.password.style.pointerEvents="auto"}),e(this,"goPressed",()=>{this.validate()}),e(this,"registerPressed",()=>{this.action="register",this.enableInputs(),TweenMax.to(this.register,.5,{opacity:1}),TweenMax.to(this.login,.5,{opacity:.5}),TweenMax.to(this.username,.5,{opacity:1}),TweenMax.to(this.password,.5,{opacity:1}),this.username.style.pointerEvents="auto",this.password.style.pointerEvents="auto"}),e(this,"enableInputs",()=>{TweenMax.to(this.wrapper,.5,{opacity:1}),this.picked||TweenMax.to(this.go,1,{alpha:.6}),this.picked=!0}),e(this,"inputLength",()=>{if(""===this.username.value||""===this.password.value)return this.go.style.pointerEvents="auto",void TweenMax.to(this.go,.15,{alpha:.6,interactive:!1});TweenMax.to(this.go,.3,{alpha:1,interactive:!0}),this.go.style.pointerEvents="auto"}),this.stage=t.stage,this.stage.alpha=0,this.app=t,this.config=this.app.config,this.wrapper=document.querySelector("#wrapper"),this.wrapper.style.width=.8*this.app.width+"px",this.wrapper.style.height=this.app.height/5+"px",this.wrapper.style.opacity=0,this.wrapper.style.pointerEvents="none",this.username=document.querySelector("#username"),this.username.style.marginBottom=.05*t.height+"px",this.username.oninput=this.inputLength,this.username.style.opacity=.6,this.username.style.pointerEvents="none",this.password=document.querySelector("#password"),this.password.oninput=this.inputLength,this.password.style.opacity=.6,this.password.style.pointerEvents="none",this.go=document.querySelector("#go"),this.go.style.opacity=.6,this.go.style.pointerEvents="none",this.go.addEventListener("click",this.goPressed),document.querySelector("#wrapper").addEventListener("submit",()=>{this.goPressed()}),this.login=document.querySelector("#login"),this.login.addEventListener("click",this.loginPressed),this.register=document.querySelector("#register"),this.register.addEventListener("click",this.registerPressed),this.go.style.display="block",this.login.style.display="block",this.register.style.display="block",this.username.style.display="block",this.password.style.display="block",TweenMax.delayedCall(1.2,()=>{TweenMax.to(this.wrapper,.5,{opacity:1}),TweenMax.to(this.stage,.5,{alpha:1})})}validate(){$.ajax({url:this.action,type:"POST",contentType:"application/json",data:JSON.stringify({user:this.username.value,pass:this.password.value}),success:e=>{if(e.nameInUse)return this.clearUserInput(),void window.alert("name in use!");e.authorized?(localStorage.setItem("match3football",e.storageItem),TweenMax.to(this.wrapper,this.config.fadeTimeBetweenPhases,{opacity:0}),TweenMax.to(this.stage,this.config.fadeTimeBetweenPhases,{alpha:0,onComplete:()=>{this.stage.removeChildren(),this.app.startLevel(),TweenMax.killAll(),this.wrapper.remove(),this.wrapper.style.display="none"}})):e.authorized||(this.clearUserInput(),window.alert("invalid username or password!"))}})}clearUserInput(){this.username.value="",this.password.value="",this.inputLength()}}exports.default=t;
},{}],"GBgj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Level.js")),t=i(require("./Stage.js")),a=i(require("./LogIn.js")),s=i(require("./Config.js"));function i(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{constructor(){super(),window.onload=(()=>{this.config=s.default,this.storageData=localStorage.getItem("match3football"),s.default.hasLogin?this.storageData?this.checkUserData():this.login=new a.default(this):this.startLevel()})}startLevel(){this.level=new e.default(this),this.stage.addChild(this.level)}getLevel(){return this.level}checkUserData(){$.ajax({url:"storageData",type:"POST",contentType:"application/json",data:JSON.stringify({data:this.storageData}),success:e=>{e.authorized?this.startLevel():this.login=new a.default(this)}})}}exports.default=r,new r;
},{"./Level.js":"I7z1","./Stage.js":"CK79","./LogIn.js":"kp3D","./Config.js":"XIfb"}]},{},["GBgj"], null)
//# sourceMappingURL=App.c1b0c005.js.map