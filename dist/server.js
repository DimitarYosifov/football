parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eMEv":[function(require,module,exports) {
const e=require("express"),t=require("parcel-bundler"),s={},a=e(),o="index.html",n=new t(o,s),r=require("body-parser"),u=require("path"),i=require("cors"),l=e.Router(),c=require("bcryptjs"),d=require("firebase/app");require("firebase/auth"),require("firebase/database");let p=process.env.PORT||3e3;a.use(e.static(__dirname+"/dist/")),a.use(r.json()),a.use(r.urlencoded({extended:!1})),a.use(i()),a.options("*",i());const b={apiKey:"AIzaSyB6CoLU9BDQyk998IlqyIY7cVwSR-fvsSw",authDomain:"football-d4256.firebaseapp.com",databaseURL:"football-d4256.firebaseio.com",storageBucket:"football-d4256.appspot.com"};a.listen(p,function(){}),d.initializeApp(b),a.post("/login",async(e,t)=>{let s=e.body.user,a=e.body.pass;d.database().ref("/users/").orderByChild("name").equalTo(s).once("value").then(function(e){let s;t.set("Content-Type","application/json");try{s=Object.values(e.val())[0].password}catch(o){return s=null,t.status(200),void t.json({authorized:!1})}c.compare(a,s,function(e,a){e?(t.status(500),t.json({authorized:!1})):a?(t.status(200),t.json({storageItem:s,authorized:!0})):(t.status(200),t.json({authorized:!1}))})})}),a.post("/register",async(e,t)=>{let s=e.body.user,a=e.body.pass;d.database().ref("/users/").orderByChild("name").equalTo(s).once("value").then(function(e){let s;try{return s=Object.values(e.val())[0].name,t.status(200),void t.json({authorized:!1,nameInUse:!0})}catch(a){s=null,o()}});let o=async()=>{try{const o=await c.genSalt(),n=await c.hash(a,o);t.set("Content-Type","application/json"),d.database().ref("/users/"+s).set({name:s,password:n},function(e){e?(t.status(200),t.json({authorized:!1})):(t.status(200),t.json({storageItem:n,authorized:!0}))})}catch(e){t.status(500).send("error_")}}}),a.post("/storageData",async(e,t)=>{let s=e.body.data;d.database().ref("/users/").orderByChild("password").equalTo(s).once("value").then(function(e){t.set("Content-Type","application/json"),t.status(200),t.json({authorized:void 0!==Object.values(e.val())[0].password})})}),a.post("/addClub",async(e,t)=>{let s=e.body.name,a=e.body.players;d.database().ref("/clubs/"+s).set({name:s,players:a},function(e){e?(t.set("Content-Type","application/json"),t.status(500),t.json({success:!1})):(t.set("Content-Type","application/json"),t.status(200),t.json({success:!0}))})}),a.use("/:test",(e,t)=>{if("getClubsPlayers"===e.params.test){let s=e.body.name;d.database().ref("/clubs/").orderByChild("name").equalTo(s).once("value").then(function(e){t.status(200),t.json({clubData:Object.values(e.val())[0]})})}}),signOutUser=function(){},user=function(e){d.auth().onAuthStateChanged(function(t){if(t){console.log(t);let s=t.uid;e(s,t.email)}else e(null,null)})};
},{}]},{},["eMEv"], null)
//# sourceMappingURL=server.js.map