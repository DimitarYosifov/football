{"id":"eMEv","dependencies":[{"name":"C:\\projects\\football\\package.json","includedInParent":true,"mtime":1605274047273}],"generated":{"js":"const e=require(\"express\"),t=require(\"parcel-bundler\"),s={},a=e(),o=\"index.html\",n=new t(o,s),r=require(\"body-parser\"),u=require(\"path\"),i=require(\"cors\"),l=e.Router(),c=require(\"bcryptjs\"),d=require(\"firebase/app\");require(\"firebase/auth\"),require(\"firebase/database\");let p=process.env.PORT||3e3;a.use(e.static(__dirname+\"\")),a.use(r.json()),a.use(r.urlencoded({extended:!1})),a.use(i()),a.options(\"*\",i());const b={apiKey:\"AIzaSyB6CoLU9BDQyk998IlqyIY7cVwSR-fvsSw\",authDomain:\"football-d4256.firebaseapp.com\",databaseURL:\"football-d4256.firebaseio.com\",storageBucket:\"football-d4256.appspot.com\"};a.listen(p,function(){}),d.initializeApp(b),a.post(\"/login\",async(e,t)=>{let s=e.body.user,a=e.body.pass;d.database().ref(\"/users/\").orderByChild(\"name\").equalTo(s).once(\"value\").then(function(e){let s;t.set(\"Content-Type\",\"application/json\");try{s=Object.values(e.val())[0].password}catch(o){return s=null,t.status(200),void t.json({authorized:!1})}c.compare(a,s,function(e,a){e?(t.status(500),t.json({authorized:!1})):a?(t.status(200),t.json({storageItem:s,authorized:!0})):(t.status(200),t.json({authorized:!1}))})})}),a.post(\"/register\",async(e,t)=>{let s=e.body.user,a=e.body.pass;d.database().ref(\"/users/\").orderByChild(\"name\").equalTo(s).once(\"value\").then(function(e){let s;try{return s=Object.values(e.val())[0].name,t.status(200),void t.json({authorized:!1,nameInUse:!0})}catch(a){s=null,o()}});let o=async()=>{try{const o=await c.genSalt(),n=await c.hash(a,o);t.set(\"Content-Type\",\"application/json\"),d.database().ref(\"/users/\"+s).set({name:s,password:n},function(e){e?(t.status(200),t.json({authorized:!1})):(t.status(200),t.json({storageItem:n,authorized:!0}))})}catch(e){t.status(500).send(\"error_\")}}}),a.post(\"/storageData\",async(e,t)=>{let s=e.body.data;d.database().ref(\"/users/\").orderByChild(\"password\").equalTo(s).once(\"value\").then(function(e){t.set(\"Content-Type\",\"application/json\"),t.status(200),t.json({authorized:void 0!==Object.values(e.val())[0].password})})}),a.post(\"/addClub\",async(e,t)=>{let s=e.body.name,a=e.body.players;d.database().ref(\"/clubs/\"+s).set({name:s,players:a},function(e){e?(t.set(\"Content-Type\",\"application/json\"),t.status(500),t.json({success:!1})):(t.set(\"Content-Type\",\"application/json\"),t.status(200),t.json({success:!0}))})}),a.use(\"/:test\",(e,t)=>{if(\"getClubsPlayers\"===e.params.test){let s=e.body.name;d.database().ref(\"/clubs/\").orderByChild(\"name\").equalTo(s).once(\"value\").then(function(e){t.status(200),t.json({clubData:Object.values(e.val())[0]})})}}),signOutUser=function(){},user=function(e){d.auth().onAuthStateChanged(function(t){if(t){console.log(t);let s=t.uid;e(s,t.email)}else e(null,null)})};"},"sourceMaps":{"js":{"mappings":[{"source":"server.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"server.js","name":"express","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"server.js","name":"require","original":{"line":1,"column":16},"generated":{"line":1,"column":8}},{"source":"server.js","original":{"line":1,"column":24},"generated":{"line":1,"column":16}},{"source":"server.js","name":"Bundler","original":{"line":4,"column":6},"generated":{"line":1,"column":27}},{"source":"server.js","name":"require","original":{"line":4,"column":16},"generated":{"line":1,"column":29}},{"source":"server.js","original":{"line":4,"column":24},"generated":{"line":1,"column":37}},{"source":"server.js","name":"options","original":{"line":5,"column":6},"generated":{"line":1,"column":55}},{"source":"server.js","original":{"line":5,"column":16},"generated":{"line":1,"column":57}},{"source":"server.js","name":"app","original":{"line":16,"column":6},"generated":{"line":1,"column":60}},{"source":"server.js","name":"express","original":{"line":16,"column":12},"generated":{"line":1,"column":62}},{"source":"server.js","name":"file","original":{"line":18,"column":6},"generated":{"line":1,"column":66}},{"source":"server.js","original":{"line":18,"column":13},"generated":{"line":1,"column":68}},{"source":"server.js","name":"bundler","original":{"line":19,"column":6},"generated":{"line":1,"column":81}},{"source":"server.js","original":{"line":19,"column":16},"generated":{"line":1,"column":83}},{"source":"server.js","name":"Bundler","original":{"line":19,"column":20},"generated":{"line":1,"column":87}},{"source":"server.js","name":"file","original":{"line":19,"column":28},"generated":{"line":1,"column":89}},{"source":"server.js","name":"options","original":{"line":19,"column":34},"generated":{"line":1,"column":91}},{"source":"server.js","name":"bodyParser","original":{"line":23,"column":6},"generated":{"line":1,"column":94}},{"source":"server.js","name":"require","original":{"line":23,"column":19},"generated":{"line":1,"column":96}},{"source":"server.js","original":{"line":23,"column":27},"generated":{"line":1,"column":104}},{"source":"server.js","name":"path","original":{"line":24,"column":6},"generated":{"line":1,"column":119}},{"source":"server.js","name":"require","original":{"line":24,"column":13},"generated":{"line":1,"column":121}},{"source":"server.js","original":{"line":24,"column":21},"generated":{"line":1,"column":129}},{"source":"server.js","name":"cors","original":{"line":25,"column":6},"generated":{"line":1,"column":137}},{"source":"server.js","name":"require","original":{"line":25,"column":13},"generated":{"line":1,"column":139}},{"source":"server.js","original":{"line":25,"column":21},"generated":{"line":1,"column":147}},{"source":"server.js","name":"router","original":{"line":26,"column":6},"generated":{"line":1,"column":155}},{"source":"server.js","name":"express","original":{"line":26,"column":15},"generated":{"line":1,"column":157}},{"source":"server.js","name":"Router","original":{"line":26,"column":23},"generated":{"line":1,"column":159}},{"source":"server.js","name":"bcrypt","original":{"line":27,"column":6},"generated":{"line":1,"column":168}},{"source":"server.js","name":"require","original":{"line":27,"column":15},"generated":{"line":1,"column":170}},{"source":"server.js","original":{"line":27,"column":23},"generated":{"line":1,"column":178}},{"source":"server.js","name":"firebase","original":{"line":28,"column":6},"generated":{"line":1,"column":190}},{"source":"server.js","name":"require","original":{"line":28,"column":17},"generated":{"line":1,"column":192}},{"source":"server.js","original":{"line":28,"column":25},"generated":{"line":1,"column":200}},{"source":"server.js","name":"require","original":{"line":29,"column":0},"generated":{"line":1,"column":216}},{"source":"server.js","original":{"line":29,"column":8},"generated":{"line":1,"column":224}},{"source":"server.js","name":"require","original":{"line":30,"column":0},"generated":{"line":1,"column":241}},{"source":"server.js","original":{"line":30,"column":8},"generated":{"line":1,"column":249}},{"source":"server.js","original":{"line":31,"column":0},"generated":{"line":1,"column":270}},{"source":"server.js","name":"port","original":{"line":31,"column":4},"generated":{"line":1,"column":274}},{"source":"server.js","name":"process","original":{"line":31,"column":11},"generated":{"line":1,"column":276}},{"source":"server.js","name":"env","original":{"line":31,"column":19},"generated":{"line":1,"column":284}},{"source":"server.js","name":"PORT","original":{"line":31,"column":23},"generated":{"line":1,"column":288}},{"source":"server.js","original":{"line":31,"column":31},"generated":{"line":1,"column":294}},{"source":"server.js","name":"app","original":{"line":36,"column":0},"generated":{"line":1,"column":298}},{"source":"server.js","name":"use","original":{"line":36,"column":4},"generated":{"line":1,"column":300}},{"source":"server.js","name":"express","original":{"line":36,"column":8},"generated":{"line":1,"column":304}},{"source":"server.js","name":"static","original":{"line":36,"column":16},"generated":{"line":1,"column":306}},{"source":"server.js","name":"__dirname","original":{"line":36,"column":23},"generated":{"line":1,"column":313}},{"source":"server.js","original":{"line":36,"column":35},"generated":{"line":1,"column":323}},{"source":"server.js","name":"app","original":{"line":37,"column":0},"generated":{"line":1,"column":328}},{"source":"server.js","name":"use","original":{"line":37,"column":4},"generated":{"line":1,"column":330}},{"source":"server.js","name":"bodyParser","original":{"line":37,"column":8},"generated":{"line":1,"column":334}},{"source":"server.js","name":"json","original":{"line":37,"column":19},"generated":{"line":1,"column":336}},{"source":"server.js","name":"app","original":{"line":39,"column":0},"generated":{"line":1,"column":344}},{"source":"server.js","name":"use","original":{"line":39,"column":4},"generated":{"line":1,"column":346}},{"source":"server.js","name":"bodyParser","original":{"line":39,"column":8},"generated":{"line":1,"column":350}},{"source":"server.js","name":"urlencoded","original":{"line":39,"column":19},"generated":{"line":1,"column":352}},{"source":"server.js","original":{"line":39,"column":30},"generated":{"line":1,"column":363}},{"source":"server.js","name":"extended","original":{"line":39,"column":32},"generated":{"line":1,"column":364}},{"source":"server.js","original":{"line":39,"column":42},"generated":{"line":1,"column":374}},{"source":"server.js","name":"app","original":{"line":40,"column":0},"generated":{"line":1,"column":379}},{"source":"server.js","name":"use","original":{"line":40,"column":4},"generated":{"line":1,"column":381}},{"source":"server.js","name":"cors","original":{"line":40,"column":8},"generated":{"line":1,"column":385}},{"source":"server.js","name":"app","original":{"line":48,"column":0},"generated":{"line":1,"column":390}},{"source":"server.js","name":"options","original":{"line":48,"column":4},"generated":{"line":1,"column":392}},{"source":"server.js","original":{"line":48,"column":12},"generated":{"line":1,"column":400}},{"source":"server.js","name":"cors","original":{"line":48,"column":17},"generated":{"line":1,"column":404}},{"source":"server.js","original":{"line":52,"column":0},"generated":{"line":1,"column":409}},{"source":"server.js","name":"config_firebase","original":{"line":52,"column":6},"generated":{"line":1,"column":415}},{"source":"server.js","original":{"line":52,"column":24},"generated":{"line":1,"column":417}},{"source":"server.js","name":"apiKey","original":{"line":53,"column":4},"generated":{"line":1,"column":418}},{"source":"server.js","original":{"line":53,"column":12},"generated":{"line":1,"column":425}},{"source":"server.js","name":"authDomain","original":{"line":54,"column":4},"generated":{"line":1,"column":467}},{"source":"server.js","original":{"line":54,"column":16},"generated":{"line":1,"column":478}},{"source":"server.js","name":"databaseURL","original":{"line":55,"column":4},"generated":{"line":1,"column":511}},{"source":"server.js","original":{"line":55,"column":17},"generated":{"line":1,"column":523}},{"source":"server.js","name":"storageBucket","original":{"line":56,"column":4},"generated":{"line":1,"column":555}},{"source":"server.js","original":{"line":56,"column":19},"generated":{"line":1,"column":569}},{"source":"server.js","name":"app","original":{"line":58,"column":0},"generated":{"line":1,"column":599}},{"source":"server.js","name":"listen","original":{"line":58,"column":4},"generated":{"line":1,"column":601}},{"source":"server.js","name":"port","original":{"line":58,"column":11},"generated":{"line":1,"column":608}},{"source":"server.js","original":{"line":58,"column":17},"generated":{"line":1,"column":610}},{"source":"server.js","name":"firebase","original":{"line":60,"column":0},"generated":{"line":1,"column":624}},{"source":"server.js","name":"initializeApp","original":{"line":60,"column":9},"generated":{"line":1,"column":626}},{"source":"server.js","name":"config_firebase","original":{"line":60,"column":23},"generated":{"line":1,"column":640}},{"source":"server.js","name":"app","original":{"line":62,"column":0},"generated":{"line":1,"column":643}},{"source":"server.js","name":"post","original":{"line":62,"column":4},"generated":{"line":1,"column":645}},{"source":"server.js","original":{"line":62,"column":9},"generated":{"line":1,"column":650}},{"source":"server.js","original":{"line":62,"column":19},"generated":{"line":1,"column":659}},{"source":"server.js","name":"req","original":{"line":62,"column":26},"generated":{"line":1,"column":665}},{"source":"server.js","name":"res","original":{"line":62,"column":31},"generated":{"line":1,"column":667}},{"source":"server.js","name":"user","original":{"line":64,"column":8},"generated":{"line":1,"column":672}},{"source":"server.js","name":"user","original":{"line":64,"column":8},"generated":{"line":1,"column":676}},{"source":"server.js","name":"req","original":{"line":64,"column":15},"generated":{"line":1,"column":678}},{"source":"server.js","name":"body","original":{"line":64,"column":19},"generated":{"line":1,"column":680}},{"source":"server.js","name":"user","original":{"line":64,"column":24},"generated":{"line":1,"column":685}},{"source":"server.js","name":"pass","original":{"line":65,"column":8},"generated":{"line":1,"column":690}},{"source":"server.js","name":"req","original":{"line":65,"column":15},"generated":{"line":1,"column":692}},{"source":"server.js","name":"body","original":{"line":65,"column":19},"generated":{"line":1,"column":694}},{"source":"server.js","name":"pass","original":{"line":65,"column":24},"generated":{"line":1,"column":699}},{"source":"server.js","name":"firebase","original":{"line":67,"column":4},"generated":{"line":1,"column":704}},{"source":"server.js","name":"database","original":{"line":67,"column":13},"generated":{"line":1,"column":706}},{"source":"server.js","name":"ref","original":{"line":67,"column":24},"generated":{"line":1,"column":717}},{"source":"server.js","original":{"line":67,"column":28},"generated":{"line":1,"column":721}},{"source":"server.js","name":"orderByChild","original":{"line":67,"column":39},"generated":{"line":1,"column":732}},{"source":"server.js","original":{"line":67,"column":52},"generated":{"line":1,"column":745}},{"source":"server.js","name":"equalTo","original":{"line":67,"column":60},"generated":{"line":1,"column":753}},{"source":"server.js","name":"user","original":{"line":67,"column":68},"generated":{"line":1,"column":761}},{"source":"server.js","name":"once","original":{"line":67,"column":74},"generated":{"line":1,"column":764}},{"source":"server.js","original":{"line":67,"column":79},"generated":{"line":1,"column":769}},{"source":"server.js","name":"then","original":{"line":67,"column":88},"generated":{"line":1,"column":778}},{"source":"server.js","original":{"line":67,"column":93},"generated":{"line":1,"column":783}},{"source":"server.js","name":"snapshot","original":{"line":67,"column":103},"generated":{"line":1,"column":792}},{"source":"server.js","name":"db_pass","original":{"line":69,"column":12},"generated":{"line":1,"column":795}},{"source":"server.js","name":"db_pass","original":{"line":69,"column":12},"generated":{"line":1,"column":799}},{"source":"server.js","name":"res","original":{"line":70,"column":8},"generated":{"line":1,"column":801}},{"source":"server.js","name":"set","original":{"line":70,"column":12},"generated":{"line":1,"column":803}},{"source":"server.js","original":{"line":70,"column":16},"generated":{"line":1,"column":807}},{"source":"server.js","original":{"line":70,"column":32},"generated":{"line":1,"column":822}},{"source":"server.js","original":{"line":72,"column":12},"generated":{"line":1,"column":842}},{"source":"server.js","name":"db_pass","original":{"line":73,"column":12},"generated":{"line":1,"column":846}},{"source":"server.js","name":"Object","original":{"line":73,"column":22},"generated":{"line":1,"column":848}},{"source":"server.js","name":"values","original":{"line":73,"column":29},"generated":{"line":1,"column":855}},{"source":"server.js","name":"snapshot","original":{"line":73,"column":36},"generated":{"line":1,"column":862}},{"source":"server.js","name":"val","original":{"line":73,"column":45},"generated":{"line":1,"column":864}},{"source":"server.js","original":{"line":73,"column":52},"generated":{"line":1,"column":871}},{"source":"server.js","name":"password","original":{"line":73,"column":55},"generated":{"line":1,"column":874}},{"source":"server.js","original":{"line":74,"column":10},"generated":{"line":1,"column":883}},{"source":"server.js","name":"e","original":{"line":74,"column":17},"generated":{"line":1,"column":889}},{"source":"server.js","original":{"line":81,"column":12},"generated":{"line":1,"column":892}},{"source":"server.js","name":"db_pass","original":{"line":75,"column":12},"generated":{"line":1,"column":899}},{"source":"server.js","original":{"line":75,"column":22},"generated":{"line":1,"column":901}},{"source":"server.js","name":"res","original":{"line":76,"column":12},"generated":{"line":1,"column":906}},{"source":"server.js","name":"status","original":{"line":76,"column":16},"generated":{"line":1,"column":908}},{"source":"server.js","original":{"line":76,"column":23},"generated":{"line":1,"column":915}},{"source":"server.js","name":"res","original":{"line":77,"column":12},"generated":{"line":1,"column":925}},{"source":"server.js","name":"json","original":{"line":77,"column":16},"generated":{"line":1,"column":927}},{"source":"server.js","original":{"line":77,"column":21},"generated":{"line":1,"column":932}},{"source":"server.js","name":"authorized","original":{"line":78,"column":16},"generated":{"line":1,"column":933}},{"source":"server.js","original":{"line":78,"column":28},"generated":{"line":1,"column":945}},{"source":"server.js","name":"bcrypt","original":{"line":84,"column":8},"generated":{"line":1,"column":949}},{"source":"server.js","name":"compare","original":{"line":84,"column":15},"generated":{"line":1,"column":951}},{"source":"server.js","name":"pass","original":{"line":84,"column":23},"generated":{"line":1,"column":959}},{"source":"server.js","name":"db_pass","original":{"line":84,"column":29},"generated":{"line":1,"column":961}},{"source":"server.js","original":{"line":84,"column":38},"generated":{"line":1,"column":963}},{"source":"server.js","name":"err","original":{"line":84,"column":48},"generated":{"line":1,"column":972}},{"source":"server.js","name":"result","original":{"line":84,"column":53},"generated":{"line":1,"column":974}},{"source":"server.js","name":"err","original":{"line":85,"column":16},"generated":{"line":1,"column":977}},{"source":"server.js","name":"res","original":{"line":86,"column":16},"generated":{"line":1,"column":980}},{"source":"server.js","name":"status","original":{"line":86,"column":20},"generated":{"line":1,"column":982}},{"source":"server.js","original":{"line":86,"column":27},"generated":{"line":1,"column":989}},{"source":"server.js","name":"res","original":{"line":87,"column":16},"generated":{"line":1,"column":994}},{"source":"server.js","name":"json","original":{"line":87,"column":20},"generated":{"line":1,"column":996}},{"source":"server.js","original":{"line":87,"column":25},"generated":{"line":1,"column":1001}},{"source":"server.js","name":"authorized","original":{"line":88,"column":20},"generated":{"line":1,"column":1002}},{"source":"server.js","original":{"line":88,"column":32},"generated":{"line":1,"column":1014}},{"source":"server.js","name":"result","original":{"line":90,"column":24},"generated":{"line":1,"column":1019}},{"source":"server.js","name":"res","original":{"line":96,"column":16},"generated":{"line":1,"column":1022}},{"source":"server.js","name":"status","original":{"line":96,"column":20},"generated":{"line":1,"column":1024}},{"source":"server.js","original":{"line":96,"column":27},"generated":{"line":1,"column":1031}},{"source":"server.js","name":"res","original":{"line":97,"column":16},"generated":{"line":1,"column":1036}},{"source":"server.js","name":"json","original":{"line":97,"column":20},"generated":{"line":1,"column":1038}},{"source":"server.js","original":{"line":97,"column":25},"generated":{"line":1,"column":1043}},{"source":"server.js","name":"storageItem","original":{"line":98,"column":20},"generated":{"line":1,"column":1044}},{"source":"server.js","name":"db_pass","original":{"line":98,"column":33},"generated":{"line":1,"column":1056}},{"source":"server.js","name":"authorized","original":{"line":99,"column":20},"generated":{"line":1,"column":1058}},{"source":"server.js","original":{"line":99,"column":32},"generated":{"line":1,"column":1070}},{"source":"server.js","name":"res","original":{"line":91,"column":16},"generated":{"line":1,"column":1076}},{"source":"server.js","name":"status","original":{"line":91,"column":20},"generated":{"line":1,"column":1078}},{"source":"server.js","original":{"line":91,"column":27},"generated":{"line":1,"column":1085}},{"source":"server.js","name":"res","original":{"line":92,"column":16},"generated":{"line":1,"column":1090}},{"source":"server.js","name":"json","original":{"line":92,"column":20},"generated":{"line":1,"column":1092}},{"source":"server.js","original":{"line":92,"column":25},"generated":{"line":1,"column":1097}},{"source":"server.js","name":"authorized","original":{"line":93,"column":20},"generated":{"line":1,"column":1098}},{"source":"server.js","original":{"line":93,"column":32},"generated":{"line":1,"column":1110}},{"source":"server.js","name":"app","original":{"line":106,"column":0},"generated":{"line":1,"column":1121}},{"source":"server.js","name":"post","original":{"line":106,"column":4},"generated":{"line":1,"column":1123}},{"source":"server.js","original":{"line":106,"column":9},"generated":{"line":1,"column":1128}},{"source":"server.js","original":{"line":106,"column":22},"generated":{"line":1,"column":1140}},{"source":"server.js","name":"req","original":{"line":106,"column":29},"generated":{"line":1,"column":1146}},{"source":"server.js","name":"res","original":{"line":106,"column":34},"generated":{"line":1,"column":1148}},{"source":"server.js","name":"user","original":{"line":107,"column":8},"generated":{"line":1,"column":1153}},{"source":"server.js","name":"user","original":{"line":107,"column":8},"generated":{"line":1,"column":1157}},{"source":"server.js","name":"req","original":{"line":107,"column":15},"generated":{"line":1,"column":1159}},{"source":"server.js","name":"body","original":{"line":107,"column":19},"generated":{"line":1,"column":1161}},{"source":"server.js","name":"user","original":{"line":107,"column":24},"generated":{"line":1,"column":1166}},{"source":"server.js","name":"pass","original":{"line":108,"column":8},"generated":{"line":1,"column":1171}},{"source":"server.js","name":"req","original":{"line":108,"column":15},"generated":{"line":1,"column":1173}},{"source":"server.js","name":"body","original":{"line":108,"column":19},"generated":{"line":1,"column":1175}},{"source":"server.js","name":"pass","original":{"line":108,"column":24},"generated":{"line":1,"column":1180}},{"source":"server.js","name":"firebase","original":{"line":110,"column":4},"generated":{"line":1,"column":1185}},{"source":"server.js","name":"database","original":{"line":110,"column":13},"generated":{"line":1,"column":1187}},{"source":"server.js","name":"ref","original":{"line":110,"column":24},"generated":{"line":1,"column":1198}},{"source":"server.js","original":{"line":110,"column":28},"generated":{"line":1,"column":1202}},{"source":"server.js","name":"orderByChild","original":{"line":110,"column":39},"generated":{"line":1,"column":1213}},{"source":"server.js","original":{"line":110,"column":52},"generated":{"line":1,"column":1226}},{"source":"server.js","name":"equalTo","original":{"line":110,"column":60},"generated":{"line":1,"column":1234}},{"source":"server.js","name":"user","original":{"line":110,"column":68},"generated":{"line":1,"column":1242}},{"source":"server.js","name":"once","original":{"line":110,"column":74},"generated":{"line":1,"column":1245}},{"source":"server.js","original":{"line":110,"column":79},"generated":{"line":1,"column":1250}},{"source":"server.js","name":"then","original":{"line":110,"column":88},"generated":{"line":1,"column":1259}},{"source":"server.js","original":{"line":110,"column":93},"generated":{"line":1,"column":1264}},{"source":"server.js","name":"snapshot","original":{"line":110,"column":103},"generated":{"line":1,"column":1273}},{"source":"server.js","name":"name","original":{"line":111,"column":12},"generated":{"line":1,"column":1276}},{"source":"server.js","name":"name","original":{"line":111,"column":12},"generated":{"line":1,"column":1280}},{"source":"server.js","original":{"line":112,"column":12},"generated":{"line":1,"column":1282}},{"source":"server.js","original":{"line":119,"column":12},"generated":{"line":1,"column":1286}},{"source":"server.js","name":"name","original":{"line":113,"column":12},"generated":{"line":1,"column":1293}},{"source":"server.js","name":"Object","original":{"line":113,"column":19},"generated":{"line":1,"column":1295}},{"source":"server.js","name":"values","original":{"line":113,"column":26},"generated":{"line":1,"column":1302}},{"source":"server.js","name":"snapshot","original":{"line":113,"column":33},"generated":{"line":1,"column":1309}},{"source":"server.js","name":"val","original":{"line":113,"column":42},"generated":{"line":1,"column":1311}},{"source":"server.js","original":{"line":113,"column":49},"generated":{"line":1,"column":1318}},{"source":"server.js","name":"name","original":{"line":113,"column":52},"generated":{"line":1,"column":1321}},{"source":"server.js","name":"res","original":{"line":114,"column":12},"generated":{"line":1,"column":1326}},{"source":"server.js","name":"status","original":{"line":114,"column":16},"generated":{"line":1,"column":1328}},{"source":"server.js","original":{"line":114,"column":23},"generated":{"line":1,"column":1335}},{"source":"server.js","name":"res","original":{"line":115,"column":12},"generated":{"line":1,"column":1345}},{"source":"server.js","name":"json","original":{"line":115,"column":16},"generated":{"line":1,"column":1347}},{"source":"server.js","original":{"line":115,"column":21},"generated":{"line":1,"column":1352}},{"source":"server.js","name":"authorized","original":{"line":116,"column":16},"generated":{"line":1,"column":1353}},{"source":"server.js","original":{"line":116,"column":28},"generated":{"line":1,"column":1365}},{"source":"server.js","name":"nameInUse","original":{"line":117,"column":16},"generated":{"line":1,"column":1367}},{"source":"server.js","original":{"line":117,"column":27},"generated":{"line":1,"column":1378}},{"source":"server.js","original":{"line":120,"column":10},"generated":{"line":1,"column":1382}},{"source":"server.js","name":"e","original":{"line":120,"column":17},"generated":{"line":1,"column":1388}},{"source":"server.js","name":"name","original":{"line":121,"column":12},"generated":{"line":1,"column":1391}},{"source":"server.js","original":{"line":121,"column":19},"generated":{"line":1,"column":1393}},{"source":"server.js","name":"tryRegistration","original":{"line":122,"column":12},"generated":{"line":1,"column":1398}},{"source":"server.js","name":"tryRegistration","original":{"line":125,"column":8},"generated":{"line":1,"column":1405}},{"source":"server.js","name":"tryRegistration","original":{"line":125,"column":8},"generated":{"line":1,"column":1409}},{"source":"server.js","original":{"line":125,"column":26},"generated":{"line":1,"column":1411}},{"source":"server.js","original":{"line":126,"column":12},"generated":{"line":1,"column":1421}},{"source":"server.js","name":"salt","original":{"line":127,"column":18},"generated":{"line":1,"column":1425}},{"source":"server.js","name":"salt","original":{"line":127,"column":18},"generated":{"line":1,"column":1431}},{"source":"server.js","name":"bcrypt","original":{"line":127,"column":31},"generated":{"line":1,"column":1439}},{"source":"server.js","name":"genSalt","original":{"line":127,"column":38},"generated":{"line":1,"column":1441}},{"source":"server.js","name":"hashedPassword","original":{"line":128,"column":18},"generated":{"line":1,"column":1451}},{"source":"server.js","name":"bcrypt","original":{"line":128,"column":41},"generated":{"line":1,"column":1459}},{"source":"server.js","name":"hash","original":{"line":128,"column":48},"generated":{"line":1,"column":1461}},{"source":"server.js","name":"pass","original":{"line":128,"column":53},"generated":{"line":1,"column":1466}},{"source":"server.js","name":"salt","original":{"line":128,"column":59},"generated":{"line":1,"column":1468}},{"source":"server.js","name":"res","original":{"line":129,"column":12},"generated":{"line":1,"column":1471}},{"source":"server.js","name":"set","original":{"line":129,"column":16},"generated":{"line":1,"column":1473}},{"source":"server.js","original":{"line":129,"column":20},"generated":{"line":1,"column":1477}},{"source":"server.js","original":{"line":129,"column":36},"generated":{"line":1,"column":1492}},{"source":"server.js","name":"firebase","original":{"line":130,"column":12},"generated":{"line":1,"column":1512}},{"source":"server.js","name":"database","original":{"line":130,"column":21},"generated":{"line":1,"column":1514}},{"source":"server.js","name":"ref","original":{"line":130,"column":32},"generated":{"line":1,"column":1525}},{"source":"server.js","original":{"line":130,"column":36},"generated":{"line":1,"column":1529}},{"source":"server.js","name":"user","original":{"line":130,"column":48},"generated":{"line":1,"column":1539}},{"source":"server.js","name":"set","original":{"line":130,"column":54},"generated":{"line":1,"column":1542}},{"source":"server.js","original":{"line":130,"column":58},"generated":{"line":1,"column":1546}},{"source":"server.js","name":"name","original":{"line":131,"column":16},"generated":{"line":1,"column":1547}},{"source":"server.js","name":"user","original":{"line":131,"column":22},"generated":{"line":1,"column":1552}},{"source":"server.js","name":"password","original":{"line":132,"column":16},"generated":{"line":1,"column":1554}},{"source":"server.js","name":"hashedPassword","original":{"line":132,"column":26},"generated":{"line":1,"column":1563}},{"source":"server.js","original":{"line":133,"column":15},"generated":{"line":1,"column":1566}},{"source":"server.js","name":"error","original":{"line":133,"column":25},"generated":{"line":1,"column":1575}},{"source":"server.js","name":"error","original":{"line":134,"column":20},"generated":{"line":1,"column":1578}},{"source":"server.js","name":"res","original":{"line":135,"column":20},"generated":{"line":1,"column":1581}},{"source":"server.js","name":"status","original":{"line":135,"column":24},"generated":{"line":1,"column":1583}},{"source":"server.js","original":{"line":135,"column":31},"generated":{"line":1,"column":1590}},{"source":"server.js","name":"res","original":{"line":136,"column":20},"generated":{"line":1,"column":1595}},{"source":"server.js","name":"json","original":{"line":136,"column":24},"generated":{"line":1,"column":1597}},{"source":"server.js","original":{"line":136,"column":29},"generated":{"line":1,"column":1602}},{"source":"server.js","name":"authorized","original":{"line":137,"column":24},"generated":{"line":1,"column":1603}},{"source":"server.js","original":{"line":137,"column":36},"generated":{"line":1,"column":1615}},{"source":"server.js","name":"res","original":{"line":140,"column":20},"generated":{"line":1,"column":1621}},{"source":"server.js","name":"status","original":{"line":140,"column":24},"generated":{"line":1,"column":1623}},{"source":"server.js","original":{"line":140,"column":31},"generated":{"line":1,"column":1630}},{"source":"server.js","name":"res","original":{"line":141,"column":20},"generated":{"line":1,"column":1635}},{"source":"server.js","name":"json","original":{"line":141,"column":24},"generated":{"line":1,"column":1637}},{"source":"server.js","original":{"line":141,"column":29},"generated":{"line":1,"column":1642}},{"source":"server.js","name":"storageItem","original":{"line":142,"column":24},"generated":{"line":1,"column":1643}},{"source":"server.js","name":"hashedPassword","original":{"line":142,"column":37},"generated":{"line":1,"column":1655}},{"source":"server.js","name":"authorized","original":{"line":143,"column":24},"generated":{"line":1,"column":1657}},{"source":"server.js","original":{"line":143,"column":36},"generated":{"line":1,"column":1669}},{"source":"server.js","original":{"line":147,"column":10},"generated":{"line":1,"column":1676}},{"source":"server.js","name":"e","original":{"line":147,"column":17},"generated":{"line":1,"column":1682}},{"source":"server.js","name":"res","original":{"line":148,"column":12},"generated":{"line":1,"column":1685}},{"source":"server.js","name":"status","original":{"line":148,"column":16},"generated":{"line":1,"column":1687}},{"source":"server.js","original":{"line":148,"column":23},"generated":{"line":1,"column":1694}},{"source":"server.js","name":"send","original":{"line":148,"column":28},"generated":{"line":1,"column":1699}},{"source":"server.js","original":{"line":148,"column":33},"generated":{"line":1,"column":1704}},{"source":"server.js","name":"app","original":{"line":153,"column":0},"generated":{"line":1,"column":1718}},{"source":"server.js","name":"post","original":{"line":153,"column":4},"generated":{"line":1,"column":1720}},{"source":"server.js","original":{"line":153,"column":9},"generated":{"line":1,"column":1725}},{"source":"server.js","original":{"line":153,"column":25},"generated":{"line":1,"column":1740}},{"source":"server.js","name":"req","original":{"line":153,"column":32},"generated":{"line":1,"column":1746}},{"source":"server.js","name":"res","original":{"line":153,"column":37},"generated":{"line":1,"column":1748}},{"source":"server.js","name":"data","original":{"line":154,"column":8},"generated":{"line":1,"column":1753}},{"source":"server.js","name":"data","original":{"line":154,"column":8},"generated":{"line":1,"column":1757}},{"source":"server.js","name":"req","original":{"line":154,"column":15},"generated":{"line":1,"column":1759}},{"source":"server.js","name":"body","original":{"line":154,"column":19},"generated":{"line":1,"column":1761}},{"source":"server.js","name":"data","original":{"line":154,"column":24},"generated":{"line":1,"column":1766}},{"source":"server.js","name":"firebase","original":{"line":155,"column":4},"generated":{"line":1,"column":1771}},{"source":"server.js","name":"database","original":{"line":155,"column":13},"generated":{"line":1,"column":1773}},{"source":"server.js","name":"ref","original":{"line":155,"column":24},"generated":{"line":1,"column":1784}},{"source":"server.js","original":{"line":155,"column":28},"generated":{"line":1,"column":1788}},{"source":"server.js","name":"orderByChild","original":{"line":155,"column":39},"generated":{"line":1,"column":1799}},{"source":"server.js","original":{"line":155,"column":52},"generated":{"line":1,"column":1812}},{"source":"server.js","name":"equalTo","original":{"line":155,"column":64},"generated":{"line":1,"column":1824}},{"source":"server.js","name":"data","original":{"line":155,"column":72},"generated":{"line":1,"column":1832}},{"source":"server.js","name":"once","original":{"line":155,"column":78},"generated":{"line":1,"column":1835}},{"source":"server.js","original":{"line":155,"column":83},"generated":{"line":1,"column":1840}},{"source":"server.js","name":"then","original":{"line":155,"column":92},"generated":{"line":1,"column":1849}},{"source":"server.js","original":{"line":155,"column":97},"generated":{"line":1,"column":1854}},{"source":"server.js","name":"snapshot","original":{"line":155,"column":107},"generated":{"line":1,"column":1863}},{"source":"server.js","name":"res","original":{"line":156,"column":8},"generated":{"line":1,"column":1866}},{"source":"server.js","name":"set","original":{"line":156,"column":12},"generated":{"line":1,"column":1868}},{"source":"server.js","original":{"line":156,"column":16},"generated":{"line":1,"column":1872}},{"source":"server.js","original":{"line":156,"column":32},"generated":{"line":1,"column":1887}},{"source":"server.js","name":"res","original":{"line":157,"column":8},"generated":{"line":1,"column":1907}},{"source":"server.js","name":"status","original":{"line":157,"column":12},"generated":{"line":1,"column":1909}},{"source":"server.js","original":{"line":157,"column":19},"generated":{"line":1,"column":1916}},{"source":"server.js","name":"res","original":{"line":158,"column":8},"generated":{"line":1,"column":1921}},{"source":"server.js","name":"json","original":{"line":158,"column":12},"generated":{"line":1,"column":1923}},{"source":"server.js","original":{"line":158,"column":17},"generated":{"line":1,"column":1928}},{"source":"server.js","name":"authorized","original":{"line":159,"column":12},"generated":{"line":1,"column":1929}},{"source":"server.js","name":"undefined","original":{"line":159,"column":70},"generated":{"line":1,"column":1945}},{"source":"server.js","name":"Object","original":{"line":159,"column":24},"generated":{"line":1,"column":1949}},{"source":"server.js","name":"values","original":{"line":159,"column":31},"generated":{"line":1,"column":1956}},{"source":"server.js","name":"snapshot","original":{"line":159,"column":38},"generated":{"line":1,"column":1963}},{"source":"server.js","name":"val","original":{"line":159,"column":47},"generated":{"line":1,"column":1965}},{"source":"server.js","original":{"line":159,"column":54},"generated":{"line":1,"column":1972}},{"source":"server.js","name":"password","original":{"line":159,"column":57},"generated":{"line":1,"column":1975}},{"source":"server.js","name":"app","original":{"line":164,"column":0},"generated":{"line":1,"column":1990}},{"source":"server.js","name":"post","original":{"line":164,"column":4},"generated":{"line":1,"column":1992}},{"source":"server.js","original":{"line":164,"column":9},"generated":{"line":1,"column":1997}},{"source":"server.js","original":{"line":164,"column":21},"generated":{"line":1,"column":2008}},{"source":"server.js","name":"req","original":{"line":164,"column":28},"generated":{"line":1,"column":2014}},{"source":"server.js","name":"res","original":{"line":164,"column":33},"generated":{"line":1,"column":2016}},{"source":"server.js","name":"name","original":{"line":165,"column":8},"generated":{"line":1,"column":2021}},{"source":"server.js","name":"name","original":{"line":165,"column":8},"generated":{"line":1,"column":2025}},{"source":"server.js","name":"req","original":{"line":165,"column":15},"generated":{"line":1,"column":2027}},{"source":"server.js","name":"body","original":{"line":165,"column":19},"generated":{"line":1,"column":2029}},{"source":"server.js","name":"name","original":{"line":165,"column":24},"generated":{"line":1,"column":2034}},{"source":"server.js","name":"players","original":{"line":166,"column":8},"generated":{"line":1,"column":2039}},{"source":"server.js","name":"req","original":{"line":166,"column":18},"generated":{"line":1,"column":2041}},{"source":"server.js","name":"body","original":{"line":166,"column":22},"generated":{"line":1,"column":2043}},{"source":"server.js","name":"players","original":{"line":166,"column":27},"generated":{"line":1,"column":2048}},{"source":"server.js","name":"firebase","original":{"line":168,"column":4},"generated":{"line":1,"column":2056}},{"source":"server.js","name":"database","original":{"line":168,"column":13},"generated":{"line":1,"column":2058}},{"source":"server.js","name":"ref","original":{"line":168,"column":24},"generated":{"line":1,"column":2069}},{"source":"server.js","original":{"line":168,"column":28},"generated":{"line":1,"column":2073}},{"source":"server.js","name":"name","original":{"line":168,"column":40},"generated":{"line":1,"column":2083}},{"source":"server.js","name":"set","original":{"line":168,"column":46},"generated":{"line":1,"column":2086}},{"source":"server.js","original":{"line":168,"column":50},"generated":{"line":1,"column":2090}},{"source":"server.js","name":"name","original":{"line":169,"column":8},"generated":{"line":1,"column":2091}},{"source":"server.js","name":"name","original":{"line":169,"column":14},"generated":{"line":1,"column":2096}},{"source":"server.js","name":"players","original":{"line":170,"column":8},"generated":{"line":1,"column":2098}},{"source":"server.js","name":"players","original":{"line":170,"column":17},"generated":{"line":1,"column":2106}},{"source":"server.js","original":{"line":171,"column":7},"generated":{"line":1,"column":2109}},{"source":"server.js","name":"error","original":{"line":171,"column":17},"generated":{"line":1,"column":2118}},{"source":"server.js","name":"error","original":{"line":172,"column":12},"generated":{"line":1,"column":2121}},{"source":"server.js","name":"res","original":{"line":173,"column":12},"generated":{"line":1,"column":2124}},{"source":"server.js","name":"set","original":{"line":173,"column":16},"generated":{"line":1,"column":2126}},{"source":"server.js","original":{"line":173,"column":20},"generated":{"line":1,"column":2130}},{"source":"server.js","original":{"line":173,"column":36},"generated":{"line":1,"column":2145}},{"source":"server.js","name":"res","original":{"line":174,"column":12},"generated":{"line":1,"column":2165}},{"source":"server.js","name":"status","original":{"line":174,"column":16},"generated":{"line":1,"column":2167}},{"source":"server.js","original":{"line":174,"column":23},"generated":{"line":1,"column":2174}},{"source":"server.js","name":"res","original":{"line":175,"column":12},"generated":{"line":1,"column":2179}},{"source":"server.js","name":"json","original":{"line":175,"column":16},"generated":{"line":1,"column":2181}},{"source":"server.js","original":{"line":175,"column":21},"generated":{"line":1,"column":2186}},{"source":"server.js","name":"success","original":{"line":176,"column":16},"generated":{"line":1,"column":2187}},{"source":"server.js","original":{"line":176,"column":25},"generated":{"line":1,"column":2196}},{"source":"server.js","name":"res","original":{"line":179,"column":12},"generated":{"line":1,"column":2202}},{"source":"server.js","name":"set","original":{"line":179,"column":16},"generated":{"line":1,"column":2204}},{"source":"server.js","original":{"line":179,"column":20},"generated":{"line":1,"column":2208}},{"source":"server.js","original":{"line":179,"column":36},"generated":{"line":1,"column":2223}},{"source":"server.js","name":"res","original":{"line":180,"column":12},"generated":{"line":1,"column":2243}},{"source":"server.js","name":"status","original":{"line":180,"column":16},"generated":{"line":1,"column":2245}},{"source":"server.js","original":{"line":180,"column":23},"generated":{"line":1,"column":2252}},{"source":"server.js","name":"res","original":{"line":181,"column":12},"generated":{"line":1,"column":2257}},{"source":"server.js","name":"json","original":{"line":181,"column":16},"generated":{"line":1,"column":2259}},{"source":"server.js","original":{"line":181,"column":21},"generated":{"line":1,"column":2264}},{"source":"server.js","name":"success","original":{"line":182,"column":16},"generated":{"line":1,"column":2265}},{"source":"server.js","original":{"line":182,"column":25},"generated":{"line":1,"column":2274}},{"source":"server.js","name":"app","original":{"line":198,"column":0},"generated":{"line":1,"column":2283}},{"source":"server.js","name":"use","original":{"line":198,"column":4},"generated":{"line":1,"column":2285}},{"source":"server.js","original":{"line":198,"column":8},"generated":{"line":1,"column":2289}},{"source":"server.js","original":{"line":198,"column":18},"generated":{"line":1,"column":2298}},{"source":"server.js","name":"req","original":{"line":198,"column":19},"generated":{"line":1,"column":2299}},{"source":"server.js","name":"res","original":{"line":198,"column":24},"generated":{"line":1,"column":2301}},{"source":"server.js","name":"req","original":{"line":199,"column":8},"generated":{"line":1,"column":2306}},{"source":"server.js","original":{"line":199,"column":28},"generated":{"line":1,"column":2309}},{"source":"server.js","name":"req","original":{"line":199,"column":8},"generated":{"line":1,"column":2329}},{"source":"server.js","name":"params","original":{"line":199,"column":12},"generated":{"line":1,"column":2331}},{"source":"server.js","name":"test","original":{"line":199,"column":19},"generated":{"line":1,"column":2338}},{"source":"server.js","original":{"line":199,"column":47},"generated":{"line":1,"column":2343}},{"source":"server.js","name":"name","original":{"line":200,"column":12},"generated":{"line":1,"column":2344}},{"source":"server.js","name":"name","original":{"line":200,"column":12},"generated":{"line":1,"column":2348}},{"source":"server.js","name":"req","original":{"line":200,"column":19},"generated":{"line":1,"column":2350}},{"source":"server.js","name":"body","original":{"line":200,"column":23},"generated":{"line":1,"column":2352}},{"source":"server.js","name":"name","original":{"line":200,"column":28},"generated":{"line":1,"column":2357}},{"source":"server.js","name":"firebase","original":{"line":201,"column":8},"generated":{"line":1,"column":2362}},{"source":"server.js","name":"database","original":{"line":201,"column":17},"generated":{"line":1,"column":2364}},{"source":"server.js","name":"ref","original":{"line":201,"column":28},"generated":{"line":1,"column":2375}},{"source":"server.js","original":{"line":201,"column":32},"generated":{"line":1,"column":2379}},{"source":"server.js","name":"orderByChild","original":{"line":201,"column":43},"generated":{"line":1,"column":2390}},{"source":"server.js","original":{"line":201,"column":56},"generated":{"line":1,"column":2403}},{"source":"server.js","name":"equalTo","original":{"line":201,"column":64},"generated":{"line":1,"column":2411}},{"source":"server.js","name":"name","original":{"line":201,"column":72},"generated":{"line":1,"column":2419}},{"source":"server.js","name":"once","original":{"line":201,"column":78},"generated":{"line":1,"column":2422}},{"source":"server.js","original":{"line":201,"column":83},"generated":{"line":1,"column":2427}},{"source":"server.js","name":"then","original":{"line":201,"column":92},"generated":{"line":1,"column":2436}},{"source":"server.js","original":{"line":201,"column":97},"generated":{"line":1,"column":2441}},{"source":"server.js","name":"snapshot","original":{"line":201,"column":107},"generated":{"line":1,"column":2450}},{"source":"server.js","name":"res","original":{"line":202,"column":12},"generated":{"line":1,"column":2453}},{"source":"server.js","name":"status","original":{"line":202,"column":16},"generated":{"line":1,"column":2455}},{"source":"server.js","original":{"line":202,"column":23},"generated":{"line":1,"column":2462}},{"source":"server.js","name":"res","original":{"line":203,"column":12},"generated":{"line":1,"column":2467}},{"source":"server.js","name":"json","original":{"line":203,"column":16},"generated":{"line":1,"column":2469}},{"source":"server.js","original":{"line":203,"column":21},"generated":{"line":1,"column":2474}},{"source":"server.js","name":"clubData","original":{"line":204,"column":16},"generated":{"line":1,"column":2475}},{"source":"server.js","name":"Object","original":{"line":204,"column":26},"generated":{"line":1,"column":2484}},{"source":"server.js","name":"values","original":{"line":204,"column":33},"generated":{"line":1,"column":2491}},{"source":"server.js","name":"snapshot","original":{"line":204,"column":40},"generated":{"line":1,"column":2498}},{"source":"server.js","name":"val","original":{"line":204,"column":49},"generated":{"line":1,"column":2500}},{"source":"server.js","original":{"line":204,"column":56},"generated":{"line":1,"column":2507}},{"source":"server.js","name":"signOutUser","original":{"line":211,"column":0},"generated":{"line":1,"column":2517}},{"source":"server.js","original":{"line":211,"column":14},"generated":{"line":1,"column":2529}},{"source":"server.js","name":"user","original":{"line":222,"column":0},"generated":{"line":1,"column":2542}},{"source":"server.js","original":{"line":222,"column":7},"generated":{"line":1,"column":2547}},{"source":"server.js","name":"callback","original":{"line":222,"column":17},"generated":{"line":1,"column":2556}},{"source":"server.js","name":"firebase","original":{"line":223,"column":4},"generated":{"line":1,"column":2559}},{"source":"server.js","name":"auth","original":{"line":223,"column":13},"generated":{"line":1,"column":2561}},{"source":"server.js","name":"onAuthStateChanged","original":{"line":223,"column":20},"generated":{"line":1,"column":2568}},{"source":"server.js","original":{"line":223,"column":39},"generated":{"line":1,"column":2587}},{"source":"server.js","name":"firebaseUser","original":{"line":223,"column":49},"generated":{"line":1,"column":2596}},{"source":"server.js","name":"firebaseUser","original":{"line":224,"column":12},"generated":{"line":1,"column":2599}},{"source":"server.js","name":"firebaseUser","original":{"line":224,"column":12},"generated":{"line":1,"column":2602}},{"source":"server.js","original":{"line":224,"column":26},"generated":{"line":1,"column":2604}},{"source":"server.js","name":"console","original":{"line":225,"column":12},"generated":{"line":1,"column":2605}},{"source":"server.js","name":"log","original":{"line":225,"column":20},"generated":{"line":1,"column":2613}},{"source":"server.js","name":"firebaseUser","original":{"line":225,"column":24},"generated":{"line":1,"column":2617}},{"source":"server.js","name":"user","original":{"line":226,"column":16},"generated":{"line":1,"column":2620}},{"source":"server.js","name":"user","original":{"line":226,"column":16},"generated":{"line":1,"column":2624}},{"source":"server.js","name":"firebaseUser","original":{"line":226,"column":23},"generated":{"line":1,"column":2626}},{"source":"server.js","name":"uid","original":{"line":226,"column":36},"generated":{"line":1,"column":2628}},{"source":"server.js","name":"callback","original":{"line":227,"column":12},"generated":{"line":1,"column":2632}},{"source":"server.js","name":"user","original":{"line":227,"column":21},"generated":{"line":1,"column":2634}},{"source":"server.js","name":"firebaseUser","original":{"line":227,"column":27},"generated":{"line":1,"column":2636}},{"source":"server.js","name":"email","original":{"line":227,"column":40},"generated":{"line":1,"column":2638}},{"source":"server.js","name":"callback","original":{"line":229,"column":12},"generated":{"line":1,"column":2650}},{"source":"server.js","original":{"line":229,"column":21},"generated":{"line":1,"column":2652}},{"source":"server.js","original":{"line":229,"column":27},"generated":{"line":1,"column":2657}}],"sources":{"server.js":"const express = require('express');\r\n\r\n\r\nconst Bundler = require('parcel-bundler');\r\nconst options = {\r\n    // watch: false,\r\n    // cache: false,\r\n    // // publicUrl: '/',\r\n    // logLevel: 4,\r\n    // hmr: false,\r\n    // detailedReport: true,\r\n    // production: process.env.NODE_ENV === 'production'\r\n\r\n}; // See options section of api docs, for the possibilities\r\n\r\nconst app = express();\r\n\r\nconst file = 'index.html'; // Pass an absolute path to the entrypoint here\r\nconst bundler = new Bundler(file, options);\r\n\r\n\r\n\r\nconst bodyParser = require('body-parser');\r\nconst path = require('path');\r\nconst cors = require('cors');\r\nconst router = express.Router();\r\nconst bcrypt = require('bcryptjs');\r\nconst firebase = require(\"firebase/app\");\r\nrequire('firebase/auth');\r\nrequire('firebase/database');\r\nlet port = process.env.PORT || 3000;\r\n// app.set('views', path.join(__dirname, ''));\r\n// app.set('view engine', 'ejs');\r\n// app.engine('html', require('ejs').renderFile);\r\n// app.disable('x-powered-by');\r\napp.use(express.static(__dirname + ''));\r\napp.use(bodyParser.json());\r\n// app.use(\"/\", router);\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(cors());\r\n\r\n// Let express use the bundler middleware, this will let Parcel handle every request over your express server\r\n\r\n// app.use(bundler.middleware());\r\n\r\n\r\n\r\napp.options('*', cors());\r\n// router.get('*', function(req, res, next) {\r\n//     res.render('index.html', {});\r\n// });\r\nconst config_firebase = {\r\n    apiKey: 'AIzaSyB6CoLU9BDQyk998IlqyIY7cVwSR-fvsSw',\r\n    authDomain: 'football-d4256.firebaseapp.com',\r\n    databaseURL: 'football-d4256.firebaseio.com',\r\n    storageBucket: 'football-d4256.appspot.com'\r\n};\r\napp.listen(port, function () { });\r\n\r\nfirebase.initializeApp(config_firebase);\r\n\r\napp.post('/login', async (req, res) => {\r\n\r\n    let user = req.body.user;\r\n    let pass = req.body.pass;\r\n\r\n    firebase.database().ref(\"/users/\").orderByChild(\"name\").equalTo(user).once('value').then(function (snapshot) {\r\n\r\n        let db_pass;\r\n        res.set('Content-Type', 'application/json');\r\n        //        res.set( \"Access-Control-Allow-Origin\", \"*\",);\r\n        try {\r\n            db_pass = Object.values(snapshot.val())[0].password;\r\n        } catch (e) { // no such user\r\n            db_pass = null;\r\n            res.status(200);\r\n            res.json({\r\n                authorized: false\r\n            });\r\n            //            res.send(`Not Allowed`);\r\n            return;\r\n        }\r\n\r\n        bcrypt.compare(pass, db_pass, function (err, result) {\r\n            if (err) {\r\n                res.status(500);\r\n                res.json({\r\n                    authorized: false\r\n                });\r\n            } else if (!result) {\r\n                res.status(200);\r\n                res.json({\r\n                    authorized: false\r\n                });\r\n            } else {\r\n                res.status(200);\r\n                res.json({\r\n                    storageItem: db_pass,\r\n                    authorized: true\r\n                });\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\napp.post('/register', async (req, res) => {\r\n    let user = req.body.user;\r\n    let pass = req.body.pass;\r\n    //    is name already taken\r\n    firebase.database().ref(\"/users/\").orderByChild(\"name\").equalTo(user).once('value').then(function (snapshot) {\r\n        let name;\r\n        try {\r\n            name = Object.values(snapshot.val())[0].name;\r\n            res.status(200);\r\n            res.json({\r\n                authorized: false,\r\n                nameInUse: true\r\n            });\r\n            return;\r\n        } catch (e) {\r\n            name = null;\r\n            tryRegistration();\r\n        }\r\n    });\r\n    let tryRegistration = async () => {\r\n        try {\r\n            const salt = await bcrypt.genSalt();\r\n            const hashedPassword = await bcrypt.hash(pass, salt);\r\n            res.set('Content-Type', 'application/json');\r\n            firebase.database().ref('/users/' + user).set({\r\n                name: user,\r\n                password: hashedPassword\r\n            }, function (error) {\r\n                if (error) {\r\n                    res.status(200);\r\n                    res.json({\r\n                        authorized: false\r\n                    });\r\n                } else {\r\n                    res.status(200);\r\n                    res.json({\r\n                        storageItem: hashedPassword,\r\n                        authorized: true\r\n                    });\r\n                }\r\n            });\r\n        } catch (e) {\r\n            res.status(500).send(\"error_\");\r\n        }\r\n    };\r\n});\r\n\r\napp.post('/storageData', async (req, res) => {\r\n    let data = req.body.data;\r\n    firebase.database().ref(\"/users/\").orderByChild(\"password\").equalTo(data).once('value').then(function (snapshot) {\r\n        res.set('Content-Type', 'application/json');\r\n        res.status(200);\r\n        res.json({\r\n            authorized: Object.values(snapshot.val())[0].password !== undefined ? true : false\r\n        });\r\n    });\r\n});\r\n\r\napp.post('/addClub', async (req, res) => {\r\n    let name = req.body.name;\r\n    let players = req.body.players;\r\n\r\n    firebase.database().ref('/clubs/' + name).set({\r\n        name: name,\r\n        players: players\r\n    }, function (error) {\r\n        if (error) {\r\n            res.set('Content-Type', 'application/json');\r\n            res.status(500);\r\n            res.json({\r\n                success: false\r\n            });\r\n        } else {\r\n            res.set('Content-Type', 'application/json');\r\n            res.status(200);\r\n            res.json({\r\n                success: true,\r\n                //                players:\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n// app.post('/getClubsPlayers', (req, res) => {\r\n//     let name = req.body.name;\r\n//     firebase.database().ref(\"/clubs/\").orderByChild(\"name\").equalTo(name).once('value').then(function (snapshot) {\r\n//         res.status(200);\r\n//         res.json({\r\n//             clubData: Object.values(snapshot.val())[0]\r\n//         });\r\n//     });\r\n// });\r\napp.use('/:test', (req, res) => {\r\n    if (req.params.test === 'getClubsPlayers') {\r\n        let name = req.body.name;\r\n        firebase.database().ref(\"/clubs/\").orderByChild(\"name\").equalTo(name).once('value').then(function (snapshot) {\r\n            res.status(200);\r\n            res.json({\r\n                clubData: Object.values(snapshot.val())[0]\r\n            });\r\n        });\r\n    }\r\n\r\n});\r\n\r\nsignOutUser = function () {\r\n    //    firebase.auth().signOut().then(function () {\r\n    //        $scope.user = '';\r\n    //        $scope.username = '';\r\n    //        $scope.img = '';\r\n    //        $state.go('home');\r\n    //    }, function (error) {\r\n    //        console.error('Sign Out Error', error);\r\n    //    });\r\n};\r\n//authStateChange\r\nuser = function (callback) {\r\n    firebase.auth().onAuthStateChanged(function (firebaseUser) {\r\n        if (firebaseUser) {\r\n            console.log(firebaseUser);\r\n            let user = firebaseUser.uid;\r\n            callback(user, firebaseUser.email)\r\n        } else {\r\n            callback(null, null)\r\n        }\r\n    });\r\n};"},"lineCount":null}},"error":null,"hash":"b01d2ec347541ed7aa636f7ec16531f4","cacheData":{"env":{}}}